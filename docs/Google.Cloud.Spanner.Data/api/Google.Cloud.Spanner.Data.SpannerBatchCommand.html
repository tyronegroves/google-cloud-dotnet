<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Class SpannerBatchCommand
   | Google.Cloud.Spanner.Data </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Class SpannerBatchCommand
   | Google.Cloud.Spanner.Data ">
    <meta name="generator" content="docfx 2.39.1.0">
    
    <link rel="shortcut icon" href="../favicon.ico">
    <link rel="stylesheet" href="../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../styles/docfx.css">
    <link rel="stylesheet" href="../styles/main.css">
    <meta property="docfx:navrel" content="../toc.html">
    <meta property="docfx:tocrel" content="toc.html">
    
    
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../index.html">
                <img id="logo" class="svg" src="../logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="Google.Cloud.Spanner.Data.SpannerBatchCommand">
  
  
  <h1 id="Google_Cloud_Spanner_Data_SpannerBatchCommand" data-uid="Google.Cloud.Spanner.Data.SpannerBatchCommand" class="text-break">Class SpannerBatchCommand
  </h1>
  <div class="markdown level0 summary"><p>Represents batched commands to execute against a Spanner database.
Currently only DML commands are supported in batch mode.
<p>
You can create an instance of <a class="xref" href="Google.Cloud.Spanner.Data.SpannerBatchCommand.html">SpannerBatchCommand</a> with no
initial commands.
You can then add commands to a <a class="xref" href="Google.Cloud.Spanner.Data.SpannerBatchCommand.html">SpannerBatchCommand</a> using the
<a class="xref" href="Google.Cloud.Spanner.Data.SpannerBatchCommand.html#Google_Cloud_Spanner_Data_SpannerBatchCommand_Add_Google_Cloud_Spanner_Data_SpannerCommandTextBuilder_Google_Cloud_Spanner_Data_SpannerParameterCollection_">Add(SpannerCommandTextBuilder, SpannerParameterCollection)</a> or
<a class="xref" href="Google.Cloud.Spanner.Data.SpannerBatchCommand.html#Google_Cloud_Spanner_Data_SpannerBatchCommand_Add_System_String_Google_Cloud_Spanner_Data_SpannerParameterCollection_">Add(String, SpannerParameterCollection)</a> or <a class="xref" href="Google.Cloud.Spanner.Data.SpannerBatchCommand.html#Google_Cloud_Spanner_Data_SpannerBatchCommand_Add_Google_Cloud_Spanner_Data_SpannerCommand_">Add(SpannerCommand)</a> methods.
</p>
<p>
For batched DML commands use <a class="xref" href="Google.Cloud.Spanner.Data.SpannerBatchCommand.html#Google_Cloud_Spanner_Data_SpannerBatchCommand_ExecuteNonQueryAsync_System_Threading_CancellationToken_">ExecuteNonQueryAsync(CancellationToken)</a> or 
<a class="xref" href="Google.Cloud.Spanner.Data.SpannerBatchCommand.html#Google_Cloud_Spanner_Data_SpannerBatchCommand_ExecuteNonQuery">ExecuteNonQuery()</a> to execute the batched commands.
</p></p>
</div>
  <div class="markdown level0 conceptual"></div>
  <div class="inheritance">
    <h5>Inheritance</h5>
    <div class="level0"><span class="xref">System.Object</span></div>
    <div class="level1"><span class="xref">SpannerBatchCommand</span></div>
  </div>
  <div class="inheritedMembers">
    <h5>Inherited Members</h5>
    <div>
      <span class="xref">System.Object.ToString()</span>
    </div>
    <div>
      <span class="xref">System.Object.GetHashCode()</span>
    </div>
    <div>
      <span class="xref">System.Object.GetType()</span>
    </div>
    <div>
      <span class="xref">System.Object.MemberwiseClone()</span>
    </div>
  </div>
  <h6><strong>Namespace</strong>: <a class="xref" href="Google.Cloud.Spanner.Data.html">Google.Cloud.Spanner.Data</a></h6>
  <h6><strong>Assembly</strong>: Google.Cloud.Spanner.Data.dll</h6>
  <h5 id="Google_Cloud_Spanner_Data_SpannerBatchCommand_syntax">Syntax</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public sealed class SpannerBatchCommand</code></pre>
  </div>
  <h3 id="properties">Properties
  </h3>
  <a id="Google_Cloud_Spanner_Data_SpannerBatchCommand_CommandTimeout_" data-uid="Google.Cloud.Spanner.Data.SpannerBatchCommand.CommandTimeout*"></a>
  <h4 id="Google_Cloud_Spanner_Data_SpannerBatchCommand_CommandTimeout" data-uid="Google.Cloud.Spanner.Data.SpannerBatchCommand.CommandTimeout">CommandTimeout</h4>
  <div class="markdown level1 summary"><p>Gets or sets the wait time before terminating the attempt to execute a command and generating an error.
Defaults to the timeout from the connection string.</p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public int CommandTimeout { get; set; }</code></pre>
  </div>
  <h5 class="propertyValue">Property Value</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><span class="xref">System.Int32</span></td>
        <td></td>
      </tr>
    </tbody>
  </table>
  <h5 id="Google_Cloud_Spanner_Data_SpannerBatchCommand_CommandTimeout_remarks">Remarks</h5>
  <div class="markdown level1 remarks"><p>A value of &apos;0&apos; normally indicates that no timeout should be used (it waits an infinite amount of time).
However, if you specify AllowImmediateTimeouts=true in the connection string, &apos;0&apos; will cause a timeout
that expires immediately. This is normally used only for testing purposes.</p>
</div>
  <a id="Google_Cloud_Spanner_Data_SpannerBatchCommand_CommandType_" data-uid="Google.Cloud.Spanner.Data.SpannerBatchCommand.CommandType*"></a>
  <h4 id="Google_Cloud_Spanner_Data_SpannerBatchCommand_CommandType" data-uid="Google.Cloud.Spanner.Data.SpannerBatchCommand.CommandType">CommandType</h4>
  <div class="markdown level1 summary"><p>The type of this batch command. If initialy set to <a class="xref" href="Google.Cloud.Spanner.Data.SpannerBatchCommandType.html#Google_Cloud_Spanner_Data_SpannerBatchCommandType_None">None</a>, this value will be
calculated when the first command is added to the batch.
<p>Only DML commands are currently supported in batch mode.</p>
<p>You can set this property freely as long as there are no commands in this bacth command.
Once there are commands in this batch command an attempt to change this property&apos;s value will throw
and <span class="xref">System.ArgumentException</span>.</p></p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public SpannerBatchCommandType CommandType { get; set; }</code></pre>
  </div>
  <h5 class="propertyValue">Property Value</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><a class="xref" href="Google.Cloud.Spanner.Data.SpannerBatchCommandType.html">SpannerBatchCommandType</a></td>
        <td></td>
      </tr>
    </tbody>
  </table>
  <a id="Google_Cloud_Spanner_Data_SpannerBatchCommand_Connection_" data-uid="Google.Cloud.Spanner.Data.SpannerBatchCommand.Connection*"></a>
  <h4 id="Google_Cloud_Spanner_Data_SpannerBatchCommand_Connection" data-uid="Google.Cloud.Spanner.Data.SpannerBatchCommand.Connection">Connection</h4>
  <div class="markdown level1 summary"><p>The connection to the data source. This is never null.</p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public SpannerConnection Connection { get; }</code></pre>
  </div>
  <h5 class="propertyValue">Property Value</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><a class="xref" href="Google.Cloud.Spanner.Data.SpannerConnection.html">SpannerConnection</a></td>
        <td></td>
      </tr>
    </tbody>
  </table>
  <a id="Google_Cloud_Spanner_Data_SpannerBatchCommand_Transaction_" data-uid="Google.Cloud.Spanner.Data.SpannerBatchCommand.Transaction*"></a>
  <h4 id="Google_Cloud_Spanner_Data_SpannerBatchCommand_Transaction" data-uid="Google.Cloud.Spanner.Data.SpannerBatchCommand.Transaction">Transaction</h4>
  <div class="markdown level1 summary"><p>The transaction to use when executing this command. If this is null, the command will be executed without a transaction.</p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public SpannerTransaction Transaction { get; }</code></pre>
  </div>
  <h5 class="propertyValue">Property Value</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><a class="xref" href="Google.Cloud.Spanner.Data.SpannerTransaction.html">SpannerTransaction</a></td>
        <td></td>
      </tr>
    </tbody>
  </table>
  <h3 id="methods">Methods
  </h3>
  <a id="Google_Cloud_Spanner_Data_SpannerBatchCommand_Add_" data-uid="Google.Cloud.Spanner.Data.SpannerBatchCommand.Add*"></a>
  <h4 id="Google_Cloud_Spanner_Data_SpannerBatchCommand_Add_Google_Cloud_Spanner_Data_SpannerCommand_" data-uid="Google.Cloud.Spanner.Data.SpannerBatchCommand.Add(Google.Cloud.Spanner.Data.SpannerCommand)">Add(SpannerCommand)</h4>
  <div class="markdown level1 summary"><p>Adds a command to the collection of batch commands to be executed by this <a class="xref" href="Google.Cloud.Spanner.Data.SpannerBatchCommand.html">SpannerBatchCommand</a>.
Only <a class="xref" href="Google.Cloud.Spanner.Data.SpannerCommand.html#Google_Cloud_Spanner_Data_SpannerCommand_CommandText">CommandText</a> and <a class="xref" href="Google.Cloud.Spanner.Data.SpannerCommand.html#Google_Cloud_Spanner_Data_SpannerCommand_Parameters">Parameters</a> will be taken into
account. Other <a class="xref" href="Google.Cloud.Spanner.Data.SpannerCommand.html">SpannerCommand</a> properties like <a class="xref" href="Google.Cloud.Spanner.Data.SpannerCommand.html#Google_Cloud_Spanner_Data_SpannerCommand_SpannerConnection">SpannerConnection</a>
and <a class="xref" href="Google.Cloud.Spanner.Data.SpannerCommand.html#Google_Cloud_Spanner_Data_SpannerCommand_DbTransaction">DbTransaction</a> will be ignored.</p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public void Add(SpannerCommand command)</code></pre>
  </div>
  <h5 class="parameters">Parameters</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Name</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><a class="xref" href="Google.Cloud.Spanner.Data.SpannerCommand.html">SpannerCommand</a></td>
        <td><span class="parametername">command</span></td>
        <td><p>The command to be added.</p>
</td>
      </tr>
    </tbody>
  </table>
  <a id="Google_Cloud_Spanner_Data_SpannerBatchCommand_Add_" data-uid="Google.Cloud.Spanner.Data.SpannerBatchCommand.Add*"></a>
  <h4 id="Google_Cloud_Spanner_Data_SpannerBatchCommand_Add_Google_Cloud_Spanner_Data_SpannerCommandTextBuilder_Google_Cloud_Spanner_Data_SpannerParameterCollection_" data-uid="Google.Cloud.Spanner.Data.SpannerBatchCommand.Add(Google.Cloud.Spanner.Data.SpannerCommandTextBuilder,Google.Cloud.Spanner.Data.SpannerParameterCollection)">Add(SpannerCommandTextBuilder, SpannerParameterCollection)</h4>
  <div class="markdown level1 summary"><p>Adds a command to the collection of batch commands to be executed by this <a class="xref" href="Google.Cloud.Spanner.Data.SpannerBatchCommand.html">SpannerBatchCommand</a>.</p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public void Add(SpannerCommandTextBuilder commandTextBuilder, SpannerParameterCollection parameters = null)</code></pre>
  </div>
  <h5 class="parameters">Parameters</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Name</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><a class="xref" href="Google.Cloud.Spanner.Data.SpannerCommandTextBuilder.html">SpannerCommandTextBuilder</a></td>
        <td><span class="parametername">commandTextBuilder</span></td>
        <td><p>A <a class="xref" href="Google.Cloud.Spanner.Data.SpannerCommandTextBuilder.html">SpannerCommandTextBuilder</a> representing the command to be added.
Must not be null or empty.
Currently only DML commands are supported in batch operations.</p>
</td>
      </tr>
      <tr>
        <td><a class="xref" href="Google.Cloud.Spanner.Data.SpannerParameterCollection.html">SpannerParameterCollection</a></td>
        <td><span class="parametername">parameters</span></td>
        <td><p>The parameters associated with <code data-dev-comment-type="paramref" class="paramref">commandTextBuilder</code>.
If <code data-dev-comment-type="paramref" class="paramref">commandTextBuilder</code> doesn&apos;t require parameters then <code data-dev-comment-type="paramref" class="paramref">parameters</code>
can be either <pre><code>null</code></pre> or empty.</p>
</td>
      </tr>
    </tbody>
  </table>
  <a id="Google_Cloud_Spanner_Data_SpannerBatchCommand_Add_" data-uid="Google.Cloud.Spanner.Data.SpannerBatchCommand.Add*"></a>
  <h4 id="Google_Cloud_Spanner_Data_SpannerBatchCommand_Add_System_String_Google_Cloud_Spanner_Data_SpannerParameterCollection_" data-uid="Google.Cloud.Spanner.Data.SpannerBatchCommand.Add(System.String,Google.Cloud.Spanner.Data.SpannerParameterCollection)">Add(String, SpannerParameterCollection)</h4>
  <div class="markdown level1 summary"><p>Adds a command to the collection of batch commands to be executed by this <a class="xref" href="Google.Cloud.Spanner.Data.SpannerBatchCommand.html">SpannerBatchCommand</a>.</p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public void Add(string commandText, SpannerParameterCollection parameters = null)</code></pre>
  </div>
  <h5 class="parameters">Parameters</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Name</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><span class="xref">System.String</span></td>
        <td><span class="parametername">commandText</span></td>
        <td><p>The command text to be added. Must not be null or empty.
Currently only DML commands are supported in batch operations.</p>
</td>
      </tr>
      <tr>
        <td><a class="xref" href="Google.Cloud.Spanner.Data.SpannerParameterCollection.html">SpannerParameterCollection</a></td>
        <td><span class="parametername">parameters</span></td>
        <td><p>The parameters associated with <code data-dev-comment-type="paramref" class="paramref">commandText</code>.
If <code data-dev-comment-type="paramref" class="paramref">commandText</code> doesn&apos;t require parameters then <code data-dev-comment-type="paramref" class="paramref">parameters</code>
can be either <pre><code>null</code></pre> or empty.</p>
</td>
      </tr>
    </tbody>
  </table>
  <a id="Google_Cloud_Spanner_Data_SpannerBatchCommand_ExecuteNonQuery_" data-uid="Google.Cloud.Spanner.Data.SpannerBatchCommand.ExecuteNonQuery*"></a>
  <h4 id="Google_Cloud_Spanner_Data_SpannerBatchCommand_ExecuteNonQuery" data-uid="Google.Cloud.Spanner.Data.SpannerBatchCommand.ExecuteNonQuery">ExecuteNonQuery()</h4>
  <div class="markdown level1 summary"><p>Executes the batch commands sequentially.
If a command fails, execution is halted and this method will throw an <a class="xref" href="Google.Cloud.Spanner.Data.SpannerBatchNonQueryException.html">SpannerBatchNonQueryException</a>
containing information about the failure and the number of affected rows by each of the commands
that executed successfully before the failure ocurred.</p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public IEnumerable&lt;long&gt; ExecuteNonQuery()</code></pre>
  </div>
  <h5 class="returns">Returns</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><span class="xref">System.Collections.Generic.IEnumerable</span>&lt;<span class="xref">System.Int64</span>&gt;</td>
        <td><p>The number of rows affected by each of the executed commands.</p>
</td>
      </tr>
    </tbody>
  </table>
  <a id="Google_Cloud_Spanner_Data_SpannerBatchCommand_ExecuteNonQueryAsync_" data-uid="Google.Cloud.Spanner.Data.SpannerBatchCommand.ExecuteNonQueryAsync*"></a>
  <h4 id="Google_Cloud_Spanner_Data_SpannerBatchCommand_ExecuteNonQueryAsync_System_Threading_CancellationToken_" data-uid="Google.Cloud.Spanner.Data.SpannerBatchCommand.ExecuteNonQueryAsync(System.Threading.CancellationToken)">ExecuteNonQueryAsync(CancellationToken)</h4>
  <div class="markdown level1 summary"><p>Executes the batch commands sequentially. The execution of this method overall is asynchronous.</p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public Task&lt;IReadOnlyList&lt;long&gt;&gt; ExecuteNonQueryAsync(CancellationToken cancellationToken = default(CancellationToken))</code></pre>
  </div>
  <h5 class="parameters">Parameters</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Name</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><span class="xref">System.Threading.CancellationToken</span></td>
        <td><span class="parametername">cancellationToken</span></td>
        <td><p>A cancellation token for the operation.</p>
</td>
      </tr>
    </tbody>
  </table>
  <h5 class="returns">Returns</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><span class="xref">System.Threading.Tasks.Task</span>&lt;<span class="xref">System.Collections.Generic.IReadOnlyList</span>&lt;<span class="xref">System.Int64</span>&gt;&gt;</td>
        <td><p>A task that once completed will indicate the number of rows 
affected by each of the executed commands.
If a command fails, execution is halted and this method will return a faulted task with an <a class="xref" href="Google.Cloud.Spanner.Data.SpannerBatchNonQueryException.html">SpannerBatchNonQueryException</a>
containing information about the failure and the number of affected rows by each of the commands
that executed successfully before the failure ocurred.</p>
</td>
      </tr>
    </tbody>
  </table>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
             
            
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../styles/docfx.js"></script>
    <script type="text/javascript" src="../styles/main.js"></script>
  </body>
</html>
